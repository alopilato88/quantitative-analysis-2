<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.550">

  <title>Quantitative Analysis 2 - Introduction to Logistic Regression</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles-lecture-slides.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Introduction to Logistic Regression</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="overview-for-today" class="slide level2">
<h2>Overview for Today</h2>
<p>Today we will be learning about:</p>
<ul>
<li>All about simple and multiple logistic regression</li>
<li>How to interpret the results of a logistic regression model</li>
</ul>
</section>
<section id="generalized-linear-models-a-family-of-statistical-models" class="slide level2">
<h2>Generalized Linear Models: A Family of Statistical Models</h2>
<p><strong>Generalized linear models</strong> (GLMs) are a family of statistical models that <strong>generalize</strong> the methods of linear regression to outcome variables that are neither continuous, nor normally distributed.</p>
</section>
<section id="the-components-of-a-glm" class="slide level2">
<h2>The Components of a GLM</h2>
<p>GLMs are built from three separate components:</p>
<ol type="1">
<li><strong>Random component</strong> that specifies the probability distribution of the outcome variable.</li>
<li><strong>Linear predictor</strong> that describes how the predictor variables relate to the outcome variable.</li>
<li><strong>Link function</strong> that <strong>links</strong> the linear predictor to the <strong>mean</strong> of the outcome variable’s probability distribution.</li>
</ol>
</section>
<section id="linear-regression-as-a-generalized-linear-model" class="slide level2">
<h2>Linear Regression as a Generalized Linear Model</h2>
<p>When considered as a GLM, we can specify a simple linear regression model as:</p>
<ol type="1">
<li><strong>Random Component</strong>: Normal distribution</li>
<li><strong>Linear Predictor</strong>: <span class="math inline">\(\beta_0 + \beta_1X_1\)</span></li>
<li><strong>Link Function</strong>: <span class="math inline">\(g(\mu)=\beta_0 + \beta_1X_1\)</span></li>
</ol>
</section>
<section id="linear-regression-as-a-generalized-linear-model-1" class="slide level2">
<h2>Linear Regression as a Generalized Linear Model</h2>
<p>We can write the linear regression model as a generalized linear model where the mean of the normal distribution is just set equal to the linear predictor, <span class="math inline">\(\beta_0 + \beta_1X_1\)</span>.</p>
<p><span class="math display">\[Y|X \sim N(\text{mn.} = \mu = g^{-1}(x), \space\text{s.d.} = \sigma)\]</span></p>
<p><span class="math display">\[Y|X \sim N(\text{mn.} =\beta_0 + \beta_1X_1, \space \text{s.d.} = \sigma)\]</span></p>
</section>
<section id="linear-regression-an-example-with-us-heights-by-gender" class="slide level2">
<h2>Linear Regression: An Example with US Heights by Gender</h2>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-2-1.png" width="960" class="r-stretch"></section>
<section id="linear-regression-an-example-with-us-heights-by-gender-1" class="slide level2">
<h2>Linear Regression: An Example with US Heights by Gender</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>mod_height <span class="ot">&lt;-</span> <span class="fu">lm</span>(ht <span class="sc">~</span> sex, <span class="at">data =</span> data_ht)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = ht ~ sex, data = data_ht)

Residuals:
     Min       1Q   Median       3Q      Max 
-11.1388  -1.8635   0.0065   1.8557  11.6430 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 63.68069    0.04038 1576.85   &lt;2e-16 ***
sexM         5.39268    0.05610   96.13   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.803 on 9998 degrees of freedom
Multiple R-squared:  0.4803,    Adjusted R-squared:  0.4803 
F-statistic:  9242 on 1 and 9998 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="linear-regression-an-example-with-us-heights-by-gender-2" class="slide level2">
<h2>Linear Regression: An Example with US Heights by Gender</h2>
<p>The probability model estimated by our regression is:</p>
<p><span class="math display">\[\text{US Ht.}|\text{Sex} \sim N(\text{mn.} =63.68 + 5.39 \times \text{Sex}, \space \text{s.d.} = 2.80)\]</span></p>
<p><span class="math display">\[\text{US Ht.}|\text{Sex = Male} \sim N(\text{mn.} =63.68 + 5.39, \space \text{s.d.} = 2.80)\]</span></p>
<p><span class="math display">\[\text{US Ht.}|\text{Sex =Female} \sim N(\text{mn.} =63.68, \space \text{s.d.} = 2.80)\]</span></p>
</section>
<section id="linear-regression-an-example-with-us-heights-by-gender-3" class="slide level2">
<h2>Linear Regression: An Example with US Heights by Gender</h2>
<p>Simulating the data according to our model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>ht_female <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5000</span>, <span class="at">mean =</span> <span class="fl">63.68</span> <span class="sc">+</span> <span class="fl">5.39</span> <span class="sc">*</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="fl">2.80</span>)</span>
<span id="cb3-2"><a></a>ht_male <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5000</span>, <span class="at">mean =</span> <span class="fl">63.68</span> <span class="sc">+</span> <span class="fl">5.39</span> <span class="sc">*</span> <span class="dv">1</span>, <span class="at">sd =</span> <span class="fl">2.80</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-6-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="what-happens-when-our-outcome-isnt-normal" class="slide level2">
<h2>What Happens When Our Outcome Isn’t Normal?</h2>
<p>The power of GLMs is that they open up a whole new world of probability distributions for us to specify when our outcome doesn’t follow a normal distribution like:</p>
<ul>
<li>Bernouli Distribution</li>
<li>Gamma Distribution</li>
<li>Poisson Distribution &amp; more!</li>
</ul>
<p>But how?</p>
</section>
<section id="non-profit-donation-an-example-of-a-bernouli-distribution" class="slide level2">
<h2>Non-Profit Donation: An Example of a Bernouli Distribution</h2>
<p>Our outcome is whether or not a shopper decided to donate to a non-profit the store at which they were shopping supported.</p>
<ul>
<li>Donate: Yes/No</li>
<li>Perceived Corporate Social Responsibility of corporation: 1-7</li>
<li>Does customer identify with the corporation: Yes/No</li>
</ul>
</section>
<section id="non-profit-donation-an-example-of-simple-logistic-regression" class="slide level2">
<h2>Non-Profit Donation: An Example of Simple Logistic Regression</h2>
<p>We can write our statistical model as:</p>
<p><span class="math display">\[\text{Donate} \sim Bern.(\text{mn.} = \pi, \space \text{s.d.} = \sqrt{\pi(1-\pi)})\]</span></p>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-8-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="non-profit-donation-linking-csr-to-donations" class="slide level2">
<h2>Non-Profit Donation: Linking CSR to Donations</h2>
<p>We are interested in understanding if a shopper’s perceptions of the corporation’s corporate social responsibility is related to their decision to donate or not. How can we model this?</p>
<p><span class="math display">\[\text{Donate}|\text{CSR} \sim Bern.(\text{mn.} = g^{-1}(x), \space \text{s.d.} = \sqrt{\pi(1-\pi)})\]</span></p>
<p>How should a good link function for <span class="math inline">\(\pi\)</span> behave? (Hint: the linear predictor can take on any negative or positive value.)</p>
</section>
<section id="the-logistic-regression-link-function-the-logit" class="slide level2">
<h2>The Logistic Regression Link Function: The Logit</h2>
<p>It turns out there is a link function that works very well: the logit or log-odds.</p>
<p><span class="math display">\[g(\pi) = \ln(\frac{\pi}{1-\pi})\]</span></p>
</section>
<section id="the-logistic-regression-link-function-the-logit-1" class="slide level2">
<h2>The Logistic Regression Link Function: The Logit</h2>
<p>Let’s see what value the Logit function outputs at different values of <span class="math inline">\(\pi\)</span>:</p>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-9-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="the-relationship-between-csr-and-donations" class="slide level2">
<h2>The Relationship Between CSR and Donations</h2>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-10-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="using-a-chi-square-test" class="slide level2">
<h2>Using a Chi-Square Test</h2>
<p>We could explore the relationship between Perceptions of CSR and donations by using a chi-squared test:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>donate_csr_table <span class="ot">&lt;-</span> <span class="fu">xtabs</span>(<span class="sc">~</span>x_csr <span class="sc">+</span> donate, data_donate)</span>
<span id="cb4-2"><a></a><span class="fu">chisq.test</span>(donate_csr_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  donate_csr_table
X-squared = 510.06, df = 6, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="modeling-the-relationship-between-csr-and-donations" class="slide level2">
<h2>Modeling the Relationship Between CSR and Donations</h2>
<p>A better and more informative way to model the relationship between CSR and donations is by building and estimating a logistic regression equation:</p>
<p><span class="math display">\[\ln{\frac{\pi_{Don.}}{1-\pi_{Don.}}}=\beta_0 + \beta_1\text{CSR}\]</span></p>
<p>Note that the outcome we are modeling is now the log-odds (logit) of the probability of donating.</p>
</section>
<section id="estimating-a-simple-logistic-regression-model-with-glm" class="slide level2">
<h2>Estimating a Simple Logistic Regression Model with <code>glm</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>mod_csr <span class="ot">&lt;-</span> <span class="fu">glm</span>(donate <span class="sc">~</span> x_csr, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb6-2"><a></a>               <span class="at">data =</span> data_donate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>We can use the function <code>glm</code> to estimate a logistic regression model in <code>R</code>. We need to tell <code>glm</code>:</p>
<ul>
<li>the linear predictor: <code>donate ~ x_csr</code></li>
<li>the random component: <code>family = binomial</code></li>
<li>the link function: <code>link = "logit"</code>.</li>
</ul>
</section>
<section id="the-results-of-a-logistic-regression-model" class="slide level2">
<h2>The Results of a Logistic Regression Model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">summary</span>(mod_csr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = donate ~ x_csr, family = binomial(link = "logit"), 
    data = data_donate)

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -4.03572    0.16903  -23.88   &lt;2e-16 ***
x_csr        0.72472    0.03652   19.85   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2837.7  on 2499  degrees of freedom
Residual deviance: 2315.0  on 2498  degrees of freedom
AIC: 2319

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
</section>
<section id="what-do-we-look-for-in-the-results" class="slide level2">
<h2>What Do We Look for in the Results?</h2>
<p>Here is a checklist of things to focus on in the model summary:</p>
<ol type="1">
<li>The sign and magnitude of the slope estimates</li>
<li>The size of the standard error compared to the estimate</li>
<li>The p-value</li>
</ol>
</section>
<section id="the-difficulty-with-interpreting-the-logistic-regression-parameters" class="slide level2">
<h2>The Difficulty with Interpreting the Logistic Regression Parameters</h2>
<p>Because of the nonlinearity of the link function, it is difficult to interpret the estimated parameters of a logistic regression model. There are two things we can know immediately though:</p>
<ol type="1">
<li>A positive slope estimate means that increases in the predictor variable lead to increases in the probability of observing the event.</li>
<li>A Z-value greater than ~|2| signals that the slope is significantly different from 0</li>
</ol>
<p>Thankfully, there are ways we can transform the slopes to make more sense of them!</p>
</section>
<section id="the-slope-as-a-change-in-the-odds-ratio" class="slide level2">
<h2>The Slope as a Change in the Odds Ratio</h2>
<p>Because thinking in logits is weird (and hard), let us transform the coefficients into something more interpretable: an odds ratio.</p>
<p><span class="math display">\[\beta_1=\log{\frac{\text{Odds}_{X + 1}}{\text{Odds}_{X}}}\]</span></p>
<p><span class="math display">\[\exp{(\beta_1)}=\frac{\text{Odds}_{X + 1}}{\text{Odds}_{X}}\]</span></p>
</section>
<section id="the-slope-as-a-change-in-the-odds-ratio-1" class="slide level2">
<h2>The Slope as a Change in the Odds Ratio</h2>
<p>A one unit increase in CSR results in a 2.06 (106 %) increase in the odds of donating to the corporation’s charity of choice.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">exp</span>(mod_csr<span class="sc">$</span>coefficients)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Coef. Name</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">Exp. Estimate</th>
<th style="text-align: right;">SE</th>
<th style="text-align: right;">Z</th>
<th style="text-align: right;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-4.04</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: right;">-23.88</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">x_csr</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">2.06</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">19.85</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="interpreting-the-logistic-regression-slope-predicted-probability" class="slide level2 smaller">
<h2>Interpreting the Logistic Regression Slope: Predicted Probability</h2>
<p>Odds ratios are also kind of hard to interpret, so I prefer to interpret the logistic regression slope as a change in the predicted probability of the outcome occurring (donating, in our example).</p>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>predicted_probability <span class="ot">&lt;-</span> <span class="fu">predict</span>(mod_csr, <span class="at">type =</span> <span class="st">"response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">CSR</th>
<th style="text-align: right;">Pred. Prob.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.04</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0.07</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.13</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.24</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.40</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">0.58</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">0.74</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</section>
<section id="predicted-probability-curve" class="slide level2">
<h2>Predicted Probability Curve</h2>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-18-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="how-do-we-interpret-the-predicted-probability-plot" class="slide level2">
<h2>How Do We Interpret the Predicted Probability Plot?</h2>
<p>The probability curve is nonlinear, so the effect that our predictor variable (corporate social responsibility) has on our outcome (donating or predicted probability of donating) differs depending on what the predicted probability is:</p>
<ul>
<li>The effect of of X on Y is low when the predicted probability is around ~.05.</li>
<li>The effect of X on Y is moderate when the predicted probability is around ~.50.</li>
<li>The effect of X on Y begins to level off after predicted probability of ~.75.</li>
</ul>
<p>So how do we provide a summary of these effects?</p>
</section>
<section id="interpreting-the-logistic-regression-slope-marginal-effect" class="slide level2">
<h2>Interpreting the Logistic Regression Slope: Marginal Effect</h2>
<p>One way to solve the interpretability solution is to calculate the effect of the predictor at a specific value of the predicted probability:</p>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-19-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="interpreting-the-logistic-regression-slope-the-average-max-marginal-effect" class="slide level2">
<h2>Interpreting the Logistic Regression Slope: The Average &amp; Max Marginal Effect</h2>
<p>Instead of calculating the marginal effect a single value of the predicted probability, it would be even better to calculate the <strong>average marginal effect</strong> and the <strong>maximum marginal effect</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>mfx<span class="sc">::</span><span class="fu">logitmfx</span>(mod_csr, <span class="at">atmean =</span> <span class="cn">FALSE</span>, <span class="at">data =</span> data_donate) <span class="co"># Average ME</span></span>
<span id="cb11-2"><a></a>mod_csr<span class="sc">$</span>coefficients[<span class="dv">2</span>] <span class="sc">/</span> <span class="dv">4</span> <span class="co"># Maximum ME </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Avg. ME</th>
<th style="text-align: right;">Max ME</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.18</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="sowhat-is-the-effect-of-csr-on-donating" class="slide level2">
<h2>So…What is the Effect of CSR on Donating?</h2>
<p>Here is a summary of our different interpretations:</p>
<ol type="1">
<li>A one unit increase in CSR (predictor) leads to a 2.06 increase in the odds of donating.</li>
<li>A one unit increase in CSR will lead to at most a 18 point increase in the probability of donating and roughly a 11 point increase, on average.</li>
</ol>
</section>
<section id="simple-logistic-regression-categorical-predictor" class="slide level2">
<h2>Simple Logistic Regression: Categorical Predictor</h2>
<p>Now we would like to know if customers’ identification with the company (a categorical predictor—yes or no) is related to whether they donate to the company’s preferred charity.</p>
</section>
<section id="a-quick-reminder-on-indicator-coding" class="slide level2">
<h2>A Quick Reminder on Indicator Coding</h2>
<p><strong>Indicator coding</strong> takes a categorical variable with K categories (2 in our case) and transforms them into K - 1 indicator variables (0 or 1).</p>
<ul>
<li>An indicator variable for each category except the reference category.</li>
<li>An indicator variable takes on a value of 1 if the observation is a member of the category else it takes on 0.</li>
<li>The reference category is identified by taking on 0s across all of the indicator variables.</li>
</ul>
</section>
<section id="indicator-coding-for-customer-identification" class="slide level2">
<h2>Indicator Coding for Customer Identification</h2>
<p>In our data, why do we only need one indicator variable and which category is the reference group?</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,500 × 2
   x_cust_id_indicator x_cust_id
                 &lt;dbl&gt; &lt;chr&gt;    
 1                   0 No       
 2                   0 No       
 3                   1 Yes      
 4                   1 Yes      
 5                   1 Yes      
 6                   1 Yes      
 7                   1 Yes      
 8                   0 No       
 9                   1 Yes      
10                   0 No       
# ℹ 2,490 more rows</code></pre>
</div>
</div>
</section>
<section id="the-relationship-between-customer-identification-and-donations" class="slide level2">
<h2>The Relationship Between Customer Identification and Donations</h2>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-23-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="estimation-interpretation-with-a-categorical-predictor" class="slide level2">
<h2>Estimation &amp; Interpretation with a Categorical Predictor</h2>
<p>Estimating a logistic regression model with a categorical predictor is no different than estimating one with a quantitative predictor and interpretation is a little easier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>mod_cust_id <span class="ot">&lt;-</span> <span class="fu">glm</span>(donate <span class="sc">~</span> x_cust_id, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>), </span>
<span id="cb13-2"><a></a>                   <span class="at">data =</span> data_donate)</span>
<span id="cb13-3"><a></a><span class="fu">summary</span>(mod_cid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = donate ~ x_cust_id, family = binomial(link = "logit"), 
    data = data_donate)

Coefficients:
             Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)  -1.40110    0.05950  -23.55   &lt;2e-16 ***
x_cust_idYes  0.98054    0.09671   10.14   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2837.7  on 2499  degrees of freedom
Residual deviance: 2736.4  on 2498  degrees of freedom
AIC: 2740.4

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
</section>
<section id="interpreting-the-effect-of-a-categorical-predictor-as-an-odds-ratio" class="slide level2">
<h2>Interpreting the Effect of a Categorical Predictor as an Odds Ratio</h2>
<p>When we exponentiate the slope for the categorical predictor, we can interpret it as an odds ratio where the numerator is the odds of an event for category K and the denominator is <strong>always</strong> the odds of an event for the reference category.</p>
<p>So, values greater than 1 indicate the odds of an event occurring for category K are greater than they are for the reference category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">exp</span>(mod_cust_id<span class="sc">$</span>coefficients[<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>x_cust_idYes 
        2.67 </code></pre>
</div>
</div>
</section>
<section id="interpreting-the-effect-of-a-categorical-predictor-as-a-predicted-probability" class="slide level2">
<h2>Interpreting the Effect of a Categorical Predictor as a Predicted Probability</h2>
<p>Similarly, we can also calculate the predicted probability of the event (donating) for each category:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">predict</span>(mod_cust_id, <span class="at">type =</span> <span class="st">"response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  x_cust_id pred_prob
  &lt;chr&gt;         &lt;dbl&gt;
1 No              0.2
2 Yes             0.4</code></pre>
</div>
</div>
</section>
<section id="the-marginal-effect-of-a-categorical-variable" class="slide level2">
<h2>The Marginal Effect of a Categorical Variable</h2>
<p>For a two category categorical variable (like ours), the marginal effect is the difference in the two predicted probabilities. For more than two categories, it is the average difference across the K-1 comparisons.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>mfx<span class="sc">::</span><span class="fu">logitmfx</span>(mod_cust_id, <span class="at">data =</span> data_donate, <span class="at">atmean =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-2"><a></a><span class="fu">prop.test</span>(<span class="fu">c</span>(donate_yes, donate_no), <span class="fu">c</span>(total_yes, total_no))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  `dF/dx` `Std. Err.`     z `P&gt;|z|`
    &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1   0.199       0.021  9.68       0</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
    2-sample test for equality of proportions with continuity correction

data:  c(donate_yes, donate_no) out of c(total_yes, total_no)
X-squared = 105.51, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: two.sided
95 percent confidence interval:
 0.1575121 0.2399721
sample estimates:
   prop 1    prop 2 
0.3963839 0.1976418 </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="multiple-logistic-regression-a-quantitative-categorical-predictor" class="slide level2">
<h2>Multiple Logistic Regression: A Quantitative &amp; Categorical Predictor</h2>
<p>Simple logistic regression is great, but multiple logistic regression is better!</p>
<p>Like multiple linear regression, multiple logistic regression allows us to estimate the effect of one predictor variable while adjusting (controlling) for the effects of the other predictor variables in the model.</p>
</section>
<section id="what-it-means-to-adjust-for-another-variable" class="slide level2">
<h2>What it Means to Adjust for Another Variable</h2>
<p>Why are ice cream sales related to shark attacks?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  sales           avg_shark_att
  &lt;chr&gt;                   &lt;dbl&gt;
1 Low Sales Rev.           20.9
2 High Sales Rev.          51.4</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  season     sales           avg_shark_att
  &lt;chr&gt;      &lt;chr&gt;                   &lt;dbl&gt;
1 Not Summer Low Sales Rev.           9.12
2 Not Summer High Sales Rev.          7.9 
3 Summer     High Sales Rev.         62.5 
4 Summer     Low Sales Rev.          63.6 </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="what-it-means-to-adjust-for-another-variable-1" class="slide level2 smaller">
<h2>What it Means to Adjust for Another Variable</h2>
<p>Here is what adjusting looks like in a model:</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">rowname</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">Std. Error</th>
<th style="text-align: right;">t value</th>
<th style="text-align: right;">Pr(&gt;|t|)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Int.</td>
<td style="text-align: right;">51.35</td>
<td style="text-align: right;">3.28</td>
<td style="text-align: right;">15.66</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Low Sales</td>
<td style="text-align: right;">-30.46</td>
<td style="text-align: right;">4.59</td>
<td style="text-align: right;">-6.64</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">rowname</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">Std. Error</th>
<th style="text-align: right;">t value</th>
<th style="text-align: right;">Pr(&gt;|t|)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Int.</td>
<td style="text-align: right;">7.93</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">6.79</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Low Sales</td>
<td style="text-align: right;">1.19</td>
<td style="text-align: right;">1.18</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.32</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Summer</td>
<td style="text-align: right;">54.55</td>
<td style="text-align: right;">1.18</td>
<td style="text-align: right;">46.07</td>
<td style="text-align: right;">0.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</section>
<section id="our-updated-example" class="slide level2">
<h2>Our Updated Example</h2>
<p>We now want to know what the impact of both a customer’s perception of the corporation’s social responsibility efforts and their identification with that corporation have on their willingness to donate to the corporation’s preferred charity.</p>
<p>To answer these questions, we will need to use a <strong>multiple logistic regression</strong> model.</p>
</section>
<section id="estimating-a-multiple-logistic-regression" class="slide level2">
<h2>Estimating A Multiple Logistic Regression</h2>
<p>Estimating a multiple logistic regression is nearly identical to estimating the simple logistic regression equation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>mod_donate <span class="ot">&lt;-</span> <span class="fu">glm</span>(donate <span class="sc">~</span> x_csr <span class="sc">+</span> x_cust_id, </span>
<span id="cb24-2"><a></a>                  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb24-3"><a></a>                  <span class="at">data =</span> data_donate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="interpreting-the-multiple-logistic-regression-estimates" class="slide level2">
<h2>Interpreting the Multiple Logistic Regression Estimates</h2>
<p>We can interpret the estimates in a multiple logistic regression model just like we would the estimates in a simple logistic regression model with the added phrase of:</p>
<p>“while adjusting (or controlling) for the effects of the other predictor variables.”</p>
</section>
<section id="interpreting-the-multiple-logistic-regression-estimates-1" class="slide level2">
<h2>Interpreting the Multiple Logistic Regression Estimates</h2>
<p>The easiest way to interpret the effects is to plot the predicted probability curves. Below you will find two curves, one for the relationship between CSR and donation when a customer does not identify with the corporation and another curve for when the customer does identify.</p>

<img data-src="03-lecture-slides_files/figure-revealjs/unnamed-chunk-39-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="calculating-the-average-marginal-effects" class="slide level2">
<h2>Calculating the Average Marginal Effects</h2>
<p>We can also still use <code>mfx::logitmfx()</code> to calculate the average marginal effects for each predictor:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>mfx<span class="sc">::</span><span class="fu">logitmfx</span>(mod_donate, <span class="at">data =</span> data_donate, <span class="at">atmean =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
mfx::logitmfx(formula = mod_donate, data = data_donate, atmean = FALSE)

Marginal Effects:
                 dF/dx Std. Err.      z     P&gt;|z|    
x_csr        0.1076262 0.0078272 13.750 &lt; 2.2e-16 ***
x_cust_idYes 0.1842693 0.0178109 10.346 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

dF/dx is for discrete change for the following variables:

[1] "x_cust_idYes"</code></pre>
</div>
</div>
</section>
<section id="writing-up-your-interpretation" class="slide level2">
<h2>Writing Up Your Interpretation</h2>
<p>For every unit increase in a customer’s perception of the corporation’s social responsibility, we expect the probability of donating to the corporation’s preferred charity to increase by 11 points, on average, while adjusting for the customer’s identification with the corporation.</p>
</section>
<section id="what-about-statistical-inference" class="slide level2">
<h2>What About Statistical Inference?</h2>
<p>We can make statistical inferences from the logistic regression model (and all GLMs) just like we did with the ordinary linear regression model:</p>
<ul>
<li>Null Hypothesis Significance Testing</li>
<li>Confidence Intervals</li>
</ul>
</section>
<section id="remember-nhst" class="slide level2">
<h2>Remember NHST</h2>
<p>We setup two hypotheses: Null &amp; Alternative. The Null Hypothesis is a statement that our regression coefficient (slope) takes on a specific value, usually 0. Then we see how far away our actual estimate is from the null value. If it is <em>far enough away</em>, then we reject our null and claim that there is a <strong>statistically significant</strong> difference between our null value and estimate.</p>
</section>
<section id="steps-to-nhst" class="slide level2">
<h2>Steps to NHST</h2>
<ol type="1">
<li>Setup your null &amp; alternative hypotheses and your alpha level</li>
<li>Calculate your test statistics (Z Value in our output)</li>
<li>Calculate the p-value (the probability of seeing a test statistics as extreme or more extreme than ours)</li>
<li>If our p-value is less than our alpha level, then we rejoice!</li>
</ol>
</section>
<section id="building-confidence-intervals-for-logistic-regression-estimates" class="slide level2">
<h2>Building Confidence Intervals for Logistic Regression Estimates</h2>
<p>To build an approximate confidence interval around the logistic regression estimate, we can use the following formula:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>csr_se <span class="ot">&lt;-</span> <span class="fu">summary</span>(mod_donate)<span class="sc">$</span>coefficients[<span class="dv">2</span>, <span class="dv">2</span>]</span>
<span id="cb27-2"><a></a>ci_95 <span class="ot">&lt;-</span> mod_donate<span class="sc">$</span>coefficients[<span class="dv">2</span>] <span class="sc">+</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fu">qnorm</span>(.<span class="dv">975</span>) <span class="sc">*</span> csr_se, <span class="fu">qnorm</span>(.<span class="dv">975</span>) <span class="sc">*</span> csr_se)</span>
<span id="cb27-3"><a></a><span class="fu">exp</span>(ci_95)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Why do we exponentiate the confidence interval?</p>
</section>
<section id="interpreting-confidence-intervals-for-logistic-regression-estimates" class="slide level2">
<h2>Interpreting Confidence Intervals for Logistic Regression Estimates</h2>
<p>We are 95% confident that the true effect of CSR is between 1.98 and 2.3.</p>
<p>So, at its smallest, a unit increase in CSR will increase the odds of donating by 98% and at its largest, a unit increase in CSR will increase the odds of donating by 130%, while adjusting for customer’s identification with the corporation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="fu">exp</span>(ci_95) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.98 2.30</code></pre>
</div>
</div>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>